<!DOCTYPE html><html class="default" lang="en" data-base="../"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Core API and Types | @karmaniverous/rrstack</title><meta name="description" content="Documentation for @karmaniverous/rrstack"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="../index.html" class="title">@karmaniverous/rrstack</a><div id="tsd-toolbar-links"><a href="https://github.com/karmaniverous/rrstack">GitHub</a></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb" aria-label="Breadcrumb"><li><a href="Handbook.html">Handbook</a></li><li><a href="" aria-current="page">Core API and Types</a></li></ul></div><div class="tsd-panel tsd-typography"><h1 id="core-api-and-types" class="tsd-anchor-link">Core API and Types<a href="#core-api-and-types" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This page enumerates the callable surface (methods, parameters, returns) and the public types you’ll use in day‑to‑day code. For examples and narrative guides, see the rest of the Handbook. For symbol‑level docs, see the hosted <a href="https://docs.karmanivero.us/rrstack">API Reference</a>.</p>
<h2 id="package-entry-points" class="tsd-anchor-link">Package entry points<a href="#package-entry-points" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="ts"><span class="hl-3">// Core</span><br/><span class="hl-4">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">RRStack</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">describeRule</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">toIsoDuration</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">fromIsoDuration</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">dateOnlyToEpoch</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">epochToWallDate</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">wallTimeToEpoch</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">RRSTACK_CONFIG_SCHEMA</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@karmaniverous/rrstack&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">// React adapter</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">useRRStack</span><span class="hl-1">, </span><span class="hl-5">useRRStackSelector</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@karmaniverous/rrstack/react&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<h2 id="class-rrstack" class="tsd-anchor-link">Class: RRStack<a href="#class-rrstack" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="ts"><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">RRStack</span><span class="hl-1">(</span><span class="hl-5">opts</span><span class="hl-1">: </span><span class="hl-5">RRStackOptions</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<ul>
<li>Builds a live, timezone‑aware stack; compiles rules immediately.</li>
</ul>
<h3 id="methods" class="tsd-anchor-link">Methods<a href="#methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>
<p><code>toJson(): RRStackOptions</code></p>
<ul>
<li>Round‑trippable snapshot with <code>version</code> set to the engine’s build version.</li>
</ul>
</li>
<li>
<p><code>update(partial?: Partial&lt;RRStackOptions&gt;, policy?: UpdatePolicy): readonly Notice[]</code></p>
<ul>
<li>Single entry point for ingesting JSON/config changes.</li>
<li>Handles version detection (up/down/invalid) and time‑unit transitions (with clamp conversion for retained rules).</li>
<li>Returns notices and also fires <code>policy.onNotice</code> for each notice.</li>
<li>See <a href="Handbook.Configuration___update().html#update-and-notices">Configuration &amp; update()</a> for details.</li>
</ul>
</li>
<li>
<p><code>isActiveAt(t: number): boolean</code></p>
<ul>
<li>True when the cascade is active at <code>t</code> (half‑open semantics).</li>
</ul>
</li>
<li>
<p><code>getSegments(from: number, to: number, opts?: { limit?: number }): Iterable&lt;{ start: number; end: number; status: 'active' | 'blackout' }&gt;</code></p>
<ul>
<li>Streams contiguous segments over <code>[from, to)</code>. Optional <code>limit</code> throws if exceeded.</li>
</ul>
</li>
<li>
<p><code>classifyRange(from: number, to: number): 'active' | 'blackout' | 'partial'</code></p>
<ul>
<li>Classifies the entire window.</li>
</ul>
</li>
<li>
<p><code>getEffectiveBounds(): { start?: number; end?: number; empty: boolean }</code></p>
<ul>
<li>Earliest active start and latest active end across the stack.</li>
<li>Omits open sides; <code>empty</code> indicates “no active coverage.”</li>
</ul>
</li>
<li>
<p><code>formatInstant(t: number, opts?: { format?: string; locale?: string }): string</code></p>
<ul>
<li>Formats <code>t</code> in the stack’s timezone; ISO by default, or a Luxon format string.</li>
</ul>
</li>
<li>
<p><code>now(): number</code></p>
<ul>
<li>Current time in the configured unit (<code>'ms'</code> or <code>'s'</code>).</li>
</ul>
</li>
</ul>
<h3 id="static-helpers" class="tsd-anchor-link">Static helpers<a href="#static-helpers" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><code>RRStack.isValidTimeZone(tz: string): boolean</code></li>
<li><code>RRStack.asTimeZoneId(tz: string): TimeZoneId // throws if invalid</code></li>
</ul>
<h3 id="properties" class="tsd-anchor-link">Properties<a href="#properties" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>
<p><code>timezone: string</code></p>
<ul>
<li>Getter/setter. Validated when set; triggers recompile.</li>
</ul>
</li>
<li>
<p><code>rules: ReadonlyArray&lt;RuleJson&gt;</code></p>
<ul>
<li>Getter/setter. Lightweight validation is applied; triggers recompile.</li>
</ul>
</li>
<li>
<p><code>timeUnit: 'ms' | 's'</code></p>
<ul>
<li>Getter (immutable). See <a href="Handbook.Configuration___update().html#time-units-and-rounding">Time units</a>.</li>
</ul>
</li>
</ul>
<h2 id="helper-functions" class="tsd-anchor-link">Helper functions<a href="#helper-functions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="ts"><span class="hl-3">// Describe a single rule in plain language (see Descriptions page for options)</span><br/><span class="hl-0">describeRule</span><span class="hl-1">(</span><span class="hl-5">rule</span><span class="hl-1">: </span><span class="hl-5">RuleJson</span><span class="hl-1">, </span><span class="hl-5">timezone</span><span class="hl-1">: </span><span class="hl-5">TimeZoneId</span><span class="hl-1">, </span><span class="hl-5">timeUnit</span><span class="hl-1">?: </span><span class="hl-5">UnixTimeUnit</span><span class="hl-1">, </span><span class="hl-5">opts</span><span class="hl-1">?: </span><span class="hl-5">DescribeOptions</span><span class="hl-1">): </span><span class="hl-5">string</span><span class="hl-1">;</span><br/><br/><span class="hl-3">// Duration helpers (UI‑friendly)</span><br/><span class="hl-0">toIsoDuration</span><span class="hl-1">(</span><span class="hl-5">parts</span><span class="hl-1">: </span><span class="hl-5">DurationParts</span><span class="hl-1">): </span><span class="hl-5">string</span><span class="hl-1">;</span><br/><span class="hl-0">fromIsoDuration</span><span class="hl-1">(</span><span class="hl-5">iso</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">): </span><span class="hl-5">DurationParts</span><span class="hl-1">;</span><br/><br/><span class="hl-3">// Time conversion helpers (wall time ↔ epoch)</span><br/><span class="hl-0">dateOnlyToEpoch</span><span class="hl-1">(</span><span class="hl-5">date</span><span class="hl-1">: </span><span class="hl-5">Date</span><span class="hl-1">, </span><span class="hl-5">timezone</span><span class="hl-1">: </span><span class="hl-5">TimeZoneId</span><span class="hl-1">, </span><span class="hl-5">timeUnit</span><span class="hl-1">?: </span><span class="hl-5">UnixTimeUnit</span><span class="hl-1">): </span><span class="hl-5">number</span><span class="hl-1">;</span><br/><span class="hl-0">wallTimeToEpoch</span><span class="hl-1">(</span><span class="hl-5">date</span><span class="hl-1">: </span><span class="hl-5">Date</span><span class="hl-1">, </span><span class="hl-5">timezone</span><span class="hl-1">: </span><span class="hl-5">TimeZoneId</span><span class="hl-1">, </span><span class="hl-5">timeUnit</span><span class="hl-1">?: </span><span class="hl-5">UnixTimeUnit</span><span class="hl-1">): </span><span class="hl-5">number</span><span class="hl-1">;</span><br/><span class="hl-0">epochToWallDate</span><span class="hl-1">(</span><span class="hl-5">epoch</span><span class="hl-1">: </span><span class="hl-5">number</span><span class="hl-1">, </span><span class="hl-5">timezone</span><span class="hl-1">: </span><span class="hl-5">TimeZoneId</span><span class="hl-1">, </span><span class="hl-5">timeUnit</span><span class="hl-1">?: </span><span class="hl-5">UnixTimeUnit</span><span class="hl-1">): </span><span class="hl-5">Date</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<p>See details, DST behavior, and mapping tips in <a href="Handbook.Time___timezones.html">Time &amp; timezones</a>.</p>
<p>For <code>DescribeOptions</code> and translator details, see <a href="Handbook.Descriptions.html">Rule descriptions</a>.</p>
<h2 id="types-selected" class="tsd-anchor-link">Types (selected)<a href="#types-selected" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="ts"><span class="hl-3">// Top‑level options</span><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-9">RRStackOptions</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">version</span><span class="hl-1">?: </span><span class="hl-9">string</span><span class="hl-1">; </span><span class="hl-3">// ignored by constructor; written by toJson()</span><br/><span class="hl-1">  </span><span class="hl-5">timezone</span><span class="hl-1">: </span><span class="hl-9">string</span><span class="hl-1">; </span><span class="hl-3">// IANA zone id (validated)</span><br/><span class="hl-1">  </span><span class="hl-5">timeUnit</span><span class="hl-1">?: </span><span class="hl-2">&#39;ms&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;s&#39;</span><span class="hl-1">; </span><span class="hl-3">// default &#39;ms&#39;</span><br/><span class="hl-1">  </span><span class="hl-5">defaultEffect</span><span class="hl-1">?: </span><span class="hl-2">&#39;active&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;blackout&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;auto&#39;</span><span class="hl-1">; </span><span class="hl-3">// default &#39;auto&#39;</span><br/><span class="hl-1">  </span><span class="hl-5">rules</span><span class="hl-1">?: </span><span class="hl-9">RuleJson</span><span class="hl-1">[]; </span><span class="hl-3">// default []</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-9">RRStackOptionsNormalized</span><br/><span class="hl-1">  </span><span class="hl-6">extends</span><span class="hl-1"> </span><span class="hl-9">Omit</span><span class="hl-1">&lt;</span><span class="hl-9">RRStackOptions</span><span class="hl-1">, </span><span class="hl-2">&#39;timeUnit&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;rules&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;timezone&#39;</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-5">timeUnit</span><span class="hl-1">: </span><span class="hl-2">&#39;ms&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;s&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">rules</span><span class="hl-1">: </span><span class="hl-6">readonly</span><span class="hl-1"> </span><span class="hl-9">RuleJson</span><span class="hl-1">[];</span><br/><span class="hl-1">  </span><span class="hl-5">timezone</span><span class="hl-1">: </span><span class="hl-9">TimeZoneId</span><span class="hl-1">; </span><span class="hl-3">// branded, validated</span><br/><span class="hl-1">  </span><span class="hl-5">defaultEffect</span><span class="hl-1">: </span><span class="hl-2">&#39;active&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;blackout&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;auto&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">// Rule JSON and options</span><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-9">RuleJson</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">effect</span><span class="hl-1">: </span><span class="hl-2">&#39;active&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;blackout&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">duration</span><span class="hl-1">?: </span><span class="hl-9">DurationParts</span><span class="hl-1">; </span><span class="hl-3">// required for recurring; omit for spans</span><br/><span class="hl-1">  </span><span class="hl-5">options</span><span class="hl-1">: </span><span class="hl-9">RuleOptionsJson</span><span class="hl-1">; </span><span class="hl-3">// JSON‑friendly subset of rrule Options</span><br/><span class="hl-1">  </span><span class="hl-5">label</span><span class="hl-1">?: </span><span class="hl-9">string</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-9">RuleOptionsJson</span><span class="hl-1"> = </span><span class="hl-9">Partial</span><span class="hl-1">&lt;</span><br/><span class="hl-1">  </span><span class="hl-9">Omit</span><span class="hl-1">&lt;</span><span class="hl-6">import</span><span class="hl-1">(</span><span class="hl-2">&#39;rrule&#39;</span><span class="hl-1">).</span><span class="hl-9">Options</span><span class="hl-1">, </span><span class="hl-2">&#39;dtstart&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;until&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;tzid&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;freq&#39;</span><span class="hl-1">&gt;</span><br/><span class="hl-1">&gt; &amp; {</span><br/><span class="hl-1">  </span><span class="hl-5">freq</span><span class="hl-1">?:</span><br/><span class="hl-1">    | </span><span class="hl-2">&#39;yearly&#39;</span><br/><span class="hl-1">    | </span><span class="hl-2">&#39;monthly&#39;</span><br/><span class="hl-1">    | </span><span class="hl-2">&#39;weekly&#39;</span><br/><span class="hl-1">    | </span><span class="hl-2">&#39;daily&#39;</span><br/><span class="hl-1">    | </span><span class="hl-2">&#39;hourly&#39;</span><br/><span class="hl-1">    | </span><span class="hl-2">&#39;minutely&#39;</span><br/><span class="hl-1">    | </span><span class="hl-2">&#39;secondly&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">starts</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">; </span><span class="hl-3">// clamp in configured unit</span><br/><span class="hl-1">  </span><span class="hl-5">ends</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">; </span><span class="hl-3">// clamp in configured unit</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-3">// Durations as structured integers (total &gt; 0)</span><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-9">DurationParts</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">years</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">months</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">weeks</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">days</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">hours</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">minutes</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">seconds</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">// Outputs and enums</span><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-9">InstantStatus</span><span class="hl-1"> = </span><span class="hl-2">&#39;active&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;blackout&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-9">RangeStatus</span><span class="hl-1"> = </span><span class="hl-9">InstantStatus</span><span class="hl-1"> | </span><span class="hl-2">&#39;partial&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-9">UnixTimeUnit</span><span class="hl-1"> = </span><span class="hl-2">&#39;ms&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;s&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-9">TimeZoneId</span><span class="hl-1"> = </span><span class="hl-9">string</span><span class="hl-1"> &amp; { </span><span class="hl-5">__brand</span><span class="hl-1">: </span><span class="hl-2">&#39;TimeZoneId&#39;</span><span class="hl-1"> };</span><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-9">DefaultEffect</span><span class="hl-1"> = </span><span class="hl-9">InstantStatus</span><span class="hl-1"> | </span><span class="hl-2">&#39;auto&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<h2 id="notices-and-updatepolicy" class="tsd-anchor-link">Notices and UpdatePolicy<a href="#notices-and-updatepolicy" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p><code>update()</code> returns a <code>Notice[]</code> and invokes the optional <code>policy.onNotice</code> callback for each notice. Defaults and behavior are summarized below; for examples and edge cases see <a href="Handbook.Configuration___update().html#update-and-notices">Configuration &amp; update()</a>.</p>
<pre><code class="ts"><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-9">Notice</span><span class="hl-1"> =</span><br/><span class="hl-1">  | {</span><br/><span class="hl-1">      </span><span class="hl-5">kind</span><span class="hl-1">: </span><span class="hl-2">&#39;versionUp&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">level</span><span class="hl-1">: </span><span class="hl-2">&#39;error&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;warn&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;info&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">from</span><span class="hl-1">: </span><span class="hl-9">string</span><span class="hl-1"> | </span><span class="hl-9">null</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">to</span><span class="hl-1">: </span><span class="hl-9">string</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">action</span><span class="hl-1">: </span><span class="hl-2">&#39;upgrade&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;rejected&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;ingestAsCurrent&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">message</span><span class="hl-1">?: </span><span class="hl-9">string</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  | {</span><br/><span class="hl-1">      </span><span class="hl-5">kind</span><span class="hl-1">: </span><span class="hl-2">&#39;versionDown&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">level</span><span class="hl-1">: </span><span class="hl-2">&#39;error&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;warn&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;info&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">from</span><span class="hl-1">: </span><span class="hl-9">string</span><span class="hl-1"> | </span><span class="hl-9">null</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">to</span><span class="hl-1">: </span><span class="hl-9">string</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">action</span><span class="hl-1">: </span><span class="hl-2">&#39;rejected&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;ingestAsCurrent&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">message</span><span class="hl-1">?: </span><span class="hl-9">string</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  | {</span><br/><span class="hl-1">      </span><span class="hl-5">kind</span><span class="hl-1">: </span><span class="hl-2">&#39;versionInvalid&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">level</span><span class="hl-1">: </span><span class="hl-2">&#39;error&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;warn&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;info&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">raw</span><span class="hl-1">: </span><span class="hl-9">unknown</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">to</span><span class="hl-1">: </span><span class="hl-9">string</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">action</span><span class="hl-1">: </span><span class="hl-2">&#39;rejected&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;ingestAsCurrent&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">message</span><span class="hl-1">?: </span><span class="hl-9">string</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  | {</span><br/><span class="hl-1">      </span><span class="hl-5">kind</span><span class="hl-1">: </span><span class="hl-2">&#39;timeUnitChange&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">level</span><span class="hl-1">: </span><span class="hl-2">&#39;error&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;warn&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;info&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">from</span><span class="hl-1">: </span><span class="hl-9">UnixTimeUnit</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">to</span><span class="hl-1">: </span><span class="hl-9">UnixTimeUnit</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">action</span><span class="hl-1">: </span><span class="hl-2">&#39;convertedExisting&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;acceptedIncomingRules&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;rejected&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">convertedRuleCount</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">replacedRuleCount</span><span class="hl-1">?: </span><span class="hl-9">number</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">message</span><span class="hl-1">?: </span><span class="hl-9">string</span><span class="hl-1">;</span><br/><span class="hl-1">    };</span><br/><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-9">UpdatePolicy</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">onVersionUp</span><span class="hl-1">?: </span><span class="hl-2">&#39;error&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;warn&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;off&#39;</span><span class="hl-1">; </span><span class="hl-3">// default &#39;off&#39;</span><br/><span class="hl-1">  </span><span class="hl-5">onVersionDown</span><span class="hl-1">?: </span><span class="hl-2">&#39;error&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;warn&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;off&#39;</span><span class="hl-1">; </span><span class="hl-3">// default &#39;error&#39;</span><br/><span class="hl-1">  </span><span class="hl-5">onVersionInvalid</span><span class="hl-1">?: </span><span class="hl-2">&#39;error&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;warn&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;off&#39;</span><span class="hl-1">; </span><span class="hl-3">// default &#39;error&#39;</span><br/><span class="hl-1">  </span><span class="hl-5">onTimeUnitChange</span><span class="hl-1">?: </span><span class="hl-2">&#39;error&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;warn&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;off&#39;</span><span class="hl-1">; </span><span class="hl-3">// default &#39;warn&#39;</span><br/><span class="hl-1">  </span><span class="hl-0">onNotice</span><span class="hl-1">?: (</span><span class="hl-5">n</span><span class="hl-1">: </span><span class="hl-9">Notice</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-9">void</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h2 id="json-schema-export" class="tsd-anchor-link">JSON Schema export<a href="#json-schema-export" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="ts"><span class="hl-4">import</span><span class="hl-1"> </span><span class="hl-4">type</span><span class="hl-1"> { </span><span class="hl-5">JSONSchema7</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;json-schema&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">RRSTACK_CONFIG_SCHEMA</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@karmaniverous/rrstack&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<ul>
<li>OpenAPI‑safe schema for serialized <code>RRStackOptions</code>. See usage and policy in <a href="Handbook.JSON_Schema___validation.html">JSON Schema &amp; validation</a>.</li>
</ul>
<h2 id="react-adapter-subpath-karmaniverousrrstackreact" class="tsd-anchor-link">React adapter (subpath <code>@karmaniverous/rrstack/react</code>)<a href="#react-adapter-subpath-karmaniverousrrstackreact" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>
<p><code>useRRStack({ json, onChange?, resetKey?, policy?, changeDebounce?, mutateDebounce?, renderDebounce?, logger? })</code></p>
<ul>
<li>Returns <code>{ rrstack, version, flushChanges, flushMutations, cancelMutations, flushRender }</code></li>
<li>Staged vs compiled behavior; debouncing knobs. See <a href="Handbook.React.html">React hooks</a>.</li>
</ul>
</li>
<li>
<p><code>useRRStackSelector({ rrstack, selector, isEqual?, renderDebounce?, logger?, resetKey? })</code></p>
<ul>
<li>Returns <code>{ selection, version, flushRender }</code></li>
</ul>
</li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#core-api-and-types"><span>Core <wbr/>API and <wbr/>Types</span></a><ul><li><a href="#package-entry-points"><span>Package entry points</span></a></li><li><a href="#class-rrstack"><span>Class: <wbr/>RR<wbr/>Stack</span></a></li><li><ul><li><a href="#methods"><span>Methods</span></a></li><li><a href="#static-helpers"><span>Static helpers</span></a></li><li><a href="#properties"><span>Properties</span></a></li></ul></li><li><a href="#helper-functions"><span>Helper functions</span></a></li><li><a href="#types-selected"><span>Types (selected)</span></a></li><li><a href="#notices-and-updatepolicy"><span>Notices and <wbr/>Update<wbr/>Policy</span></a></li><li><a href="#json-schema-export"><span>JSON <wbr/>Schema export</span></a></li><li><a href="#react-adapter-subpath-karmaniverousrrstackreact"><span>React adapter (subpath @karmaniverous/rrstack/react)</span></a></li></ul></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/karmaniverous/rrstack" class="tsd-nav-link">GitHub</a></nav><nav class="tsd-navigation"><a href="../modules.html">@karmaniverous/rrstack</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
